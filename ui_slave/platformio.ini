; ==========================================================================
; OpenChessMate — UI Slave (VIEWE 4.3" 800x480 ESP32-S3 Display)
; Board:  VIEWE UEDX80480043E-WB-A
; MCU:    ESP32-S3-N16R8 (16MB Flash, 8MB PSRAM OPI)
; Display: 800x480 RGB IPS (ST7262E43-G4), GT911 capacitive touch
; Library: ESP32_Display_Panel (built-in board support)
; ==========================================================================

[env:BOARD_VIEWE_UEDX80480043E_WB_A]
framework = arduino

; Use pioarduino platform fork for Arduino 3.1.x support (required by ESP32_Display_Panel)
platform = https://github.com/pioarduino/platform-espressif32/releases/download/53.03.11/platform-espressif32.zip
platform_packages =
    platformio/framework-arduinoespressif32@https://github.com/espressif/arduino-esp32.git#3.1.1
    ; High-performance libs — avoids ESP32-S3 RGB LCD screen drifting
    platformio/framework-arduinoespressif32-libs@https://dl.espressif.com/AE/esp-arduino-libs/esp32-3.1.1-h.zip

board = BOARD_VIEWE_UEDX80480043E_WB_A

monitor_speed = 115200

lib_deps =
    https://github.com/esp-arduino-libs/ESP32_Display_Panel.git
    https://github.com/esp-arduino-libs/ESP32_IO_Expander.git#v1.1.0
    https://github.com/esp-arduino-libs/esp-lib-utils.git#v0.2.0
    https://github.com/lvgl/lvgl.git#v8.4.0

build_flags =
    ; Arduino / core
    -DCORE_DEBUG_LEVEL=1
    ; LVGL
    -DLV_CONF_INCLUDE_SIMPLE
    -DLV_LVGL_H_INCLUDE_SIMPLE
    -DLV_COLOR_16_SWAP=0          ; RGB bus — no byte swap
    ; ESP32_Display_Panel — use built-in VIEWE 4.3" board definition
    -DESP_PANEL_BOARD_DEFAULT_USE_SUPPORTED=1
    -DBOARD_VIEWE_UEDX80480043E_WB_A
    ; Include src/ so lv_conf.h and lvgl_v8_port.h are found
    -I src
